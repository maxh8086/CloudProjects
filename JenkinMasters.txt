#cloud-config
package_update: true
packages:
 - openjdk-17-jre
 - jenkins
runcmd:
 - apt update
 - apt-get install -y openjdk-17-jre
 - echo 'deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/' | tee /etc/apt/sources.list.d/jenkins.list > /dev/null
 - apt-get update
 - apt-get install jenkins -y
 - ufw allow 22/tcp
 - ufw allow 8080/tcp
 - echo "y" | ufw enable
 - systemctl start jenkins
 - systemctl enable jenkins